{% extends 'base.html' %}
{% load static %}
{% load custom_filters %}

{% block title %}{{ group.name }} - Kongossa{% endblock %}

{% block extra_css %}
<style>
    /* Background personnalisé avec la couleur du groupe - Assombri avec overlay */
    .topic-background {
        background: linear-gradient(180deg, 
            {% if group.banner_color %}{{ group.banner_color }}{% else %}{{ topic.color }}{% endif %} 0%, 
            {% if group.banner_color %}{{ group.banner_color }}{% else %}{{ topic.color }}{% endif %}dd 30%, 
            {% if group.banner_color %}{{ group.banner_color }}{% else %}{{ topic.color }}{% endif %}aa 60%,
            {% if group.banner_color %}{{ group.banner_color }}{% else %}{{ topic.color }}{% endif %}88 100%
        );
        min-height: 100vh;
        position: relative;
    }
    
    /* Overlay sombre pour assombrir le background */
    .topic-background::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.3);
        pointer-events: none;
        z-index: 0;
    }
    
    /* Contenu au-dessus de l'overlay */
    .topic-content {
        position: relative;
        z-index: 1;
    }
    
    /* Smooth scrolling */
    html {
        scroll-behavior: smooth;
    }
    
    body {
        scroll-behavior: smooth;
    }
    
    /* Skeleton Loader Styles */
    .skeleton-post {
        background: rgba(255, 255, 255, 0.85);
        backdrop-filter: blur(15px);
        -webkit-backdrop-filter: blur(15px);
        border: 1px solid rgba(255, 255, 255, 0.3);
        border-radius: 1.5rem;
        padding: 1.25rem;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
    }

    .skeleton-header {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        margin-bottom: 1rem;
    }

    .skeleton-avatar {
        width: 2.5rem;
        height: 2.5rem;
        border-radius: 50%;
        background: linear-gradient(90deg, #e0e0e0 0%, #f0f0f0 50%, #e0e0e0 100%);
        background-size: 200% 100%;
        animation: shimmer 1.5s infinite;
        flex-shrink: 0;
    }

    .skeleton-text-group {
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
    }

    .skeleton-line {
        height: 0.75rem;
        border-radius: 0.5rem;
        background: linear-gradient(90deg, #e0e0e0 0%, #f0f0f0 50%, #e0e0e0 100%);
        background-size: 200% 100%;
        animation: shimmer 1.5s infinite;
    }

    .skeleton-line-title {
        width: 40%;
        height: 1rem;
    }

    .skeleton-line-subtitle {
        width: 30%;
        height: 0.625rem;
    }

    .skeleton-line-short {
        width: 60%;
    }

    .skeleton-content {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
        margin-bottom: 1rem;
    }

    .skeleton-actions {
        display: flex;
        gap: 2rem;
        padding-top: 1rem;
        border-top: 1px solid rgba(0, 0, 0, 0.1);
    }

    .skeleton-button {
        width: 4rem;
        height: 2rem;
        border-radius: 9999px;
        background: linear-gradient(90deg, #e0e0e0 0%, #f0f0f0 50%, #e0e0e0 100%);
        background-size: 200% 100%;
        animation: shimmer 1.5s infinite;
    }

    @keyframes shimmer {
        0% {
            background-position: -200% 0;
        }
        100% {
            background-position: 200% 0;
        }
    }
    
    @keyframes fade-in {
        from {
            opacity: 0;
            transform: translateY(-10px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    .animate-fade-in {
        animation: fade-in 0.3s ease-out;
    }

    /* Fade-in animation pour les nouveaux posts */
    .fade-in-post {
        animation: fadeInPost 0.5s ease-in;
    }

    @keyframes fadeInPost {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    /* Masquer le skeleton par défaut */
    #skeleton-loader.hidden {
        display: none;
    }
    
    /* Bannière du groupe */
    .topic-banner {
        background: linear-gradient(135deg, {% if group.banner_color %}{{ group.banner_color }}{% else %}{{ topic.color }}{% endif %} 0%, {% if group.banner_color %}{{ group.banner_color }}{% else %}{{ topic.color }}{% endif %}cc 100%);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
    }
    
    /* Animation pour les icônes flottantes */
    @keyframes floatIcon {
        0%, 100% {
            transform: translateY(0px) translateX(0px) rotate(0deg);
            opacity: 0.1;
        }
        25% {
            transform: translateY(-40px) translateX(15px) rotate(8deg);
            opacity: 0.15;
        }
        50% {
            transform: translateY(-30px) translateX(-15px) rotate(-8deg);
            opacity: 0.12;
        }
        75% {
            transform: translateY(-50px) translateX(10px) rotate(5deg);
            opacity: 0.15;
        }
    }
    
    .animate-float-icon {
        animation: floatIcon 12s ease-in-out infinite;
    }
</style>
{% endblock %}

{% block content %}
<div class="min-h-screen topic-background pb-20 relative">
    <!-- Icônes décoratives animées en noir/blanc -->
    <div class="absolute inset-0 overflow-hidden pointer-events-none" style="z-index: 0;">
        <!-- Chat/Message Bubbles -->
        <div class="absolute top-10 left-10 w-8 h-8 md:w-12 md:h-12 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 0s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"/>
            </svg>
        </div>
        <div class="absolute top-32 right-16 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 1s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"/>
            </svg>
        </div>
        
        <!-- Like/Heart -->
        <div class="absolute top-20 right-1/4 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 2s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
            </svg>
        </div>
        <div class="absolute top-1/3 left-1/4 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 3.5s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
            </svg>
        </div>
        
        <!-- Music Note -->
        <div class="absolute bottom-32 left-1/4 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 0.5s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"/>
            </svg>
        </div>
        <div class="absolute top-1/2 right-1/3 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 4s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"/>
            </svg>
        </div>
        
        <!-- Phone/Voice Call -->
        <div class="absolute bottom-20 right-10 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 1.5s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/>
            </svg>
        </div>
        <div class="absolute top-2/3 left-10 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 5s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/>
            </svg>
        </div>
        
        <!-- Users/Contacts -->
        <div class="absolute bottom-40 left-10 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 2.5s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/>
            </svg>
        </div>
        <div class="absolute top-1/4 right-1/5 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 4.5s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/>
            </svg>
        </div>
        
        <!-- Share -->
        <div class="absolute top-1/2 left-1/3 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 3s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"/>
            </svg>
        </div>
        <div class="absolute bottom-1/3 right-1/4 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 5.5s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"/>
            </svg>
        </div>
        
        <!-- Email/Letter -->
        <div class="absolute top-1/3 right-1/3 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 1.8s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
            </svg>
        </div>
        <div class="absolute bottom-1/4 left-1/3 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 6s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
            </svg>
        </div>
        
        <!-- Comment -->
        <div class="absolute bottom-1/4 right-1/4 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 0.8s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M21.99 4c0-1.1-.89-2-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4-.01-18zM18 14H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"/>
            </svg>
        </div>
        <div class="absolute top-3/4 left-1/2 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 6.5s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M21.99 4c0-1.1-.89-2-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4-.01-18zM18 14H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"/>
            </svg>
        </div>
        
        <!-- Notification Bell -->
        <div class="absolute top-16 right-20 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 2.2s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/>
            </svg>
        </div>
        <div class="absolute bottom-1/2 right-1/5 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 7s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/>
            </svg>
        </div>
        
        <!-- Video Call -->
        <div class="absolute top-2/3 left-1/5 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 3.2s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"/>
            </svg>
        </div>
        <div class="absolute bottom-16 right-1/3 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 7.5s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"/>
            </svg>
        </div>
        
        <!-- Camera/Photo -->
        <div class="absolute top-1/5 left-1/2 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 1.2s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/>
            </svg>
        </div>
        <div class="absolute bottom-1/5 right-1/2 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 8s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/>
            </svg>
        </div>
        
        <!-- Emoji/Smile -->
        <div class="absolute top-1/6 right-1/6 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 2.8s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z"/>
            </svg>
        </div>
        <div class="absolute bottom-1/3 left-2/3 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 8.5s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z"/>
            </svg>
        </div>
        
        <!-- Additional Icons - More Social Media Icons -->
        
        <!-- Thumbs Up/Like -->
        <div class="absolute top-1/5 right-1/5 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 9s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2z"/>
            </svg>
        </div>
        <div class="absolute bottom-1/6 left-1/5 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 9.5s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M15 3H6c-1.1 0-2 .9-2 2v11c0 1.1.9 2 2 2h2.59l3.58 3.59c.38.38.9.59 1.41.59s1.03-.21 1.41-.59L15.41 18H18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 13H6V5h9v11z"/>
            </svg>
        </div>
        
        <!-- Send/Paper Plane -->
        <div class="absolute top-2/5 left-1/6 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 10s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
            </svg>
        </div>
        <div class="absolute bottom-2/5 right-1/6 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 10.5s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
            </svg>
        </div>
        
        <!-- Bookmark -->
        <div class="absolute top-3/5 right-2/5 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 11s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M17 3H7c-1.1 0-2 .9-2 2v16l7-3 7 3V5c0-1.1-.9-2-2-2z"/>
            </svg>
        </div>
        <div class="absolute bottom-3/5 left-2/5 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 11.5s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M17 3H7c-1.1 0-2 .9-2 2v16l7-3 7 3V5c0-1.1-.9-2-2-2z"/>
            </svg>
        </div>
        
        <!-- Star -->
        <div class="absolute top-4/5 right-1/3 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 12s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
            </svg>
        </div>
        <div class="absolute bottom-4/5 left-1/3 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 12.5s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
            </svg>
        </div>
        
        <!-- Location/Pin -->
        <div class="absolute top-1/7 left-1/7 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 13s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
            </svg>
        </div>
        <div class="absolute bottom-1/7 right-1/7 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 13.5s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
            </svg>
        </div>
        
        <!-- Calendar -->
        <div class="absolute top-3/7 right-3/7 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 14s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"/>
            </svg>
        </div>
        <div class="absolute bottom-3/7 left-3/7 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 14.5s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"/>
            </svg>
        </div>
        
        <!-- Tag/Hashtag -->
        <div class="absolute top-4/7 right-4/7 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 15s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7.01v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12l-4.37-6.16z"/>
            </svg>
        </div>
        <div class="absolute bottom-4/7 left-4/7 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 15.5s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M7.13 19.77l-1.26-1.26 7.41-7.41 1.26 1.26-7.41 7.41zm-2.83-2.83l1.26 1.26L3 20.87V22h1.13l2.3-2.3 1.26 1.26-.94.94-.89.89-.94.94-1.26-1.26.94-.94.89-.89.18-.18zm6.36-14.31l1.26 1.26-7.41 7.41-1.26-1.26 7.41-7.41zm-1.17 10.35l-1.26-1.26L17.74 2H22v4.26l-8.87 8.87zm3.13-10.35l1.26 1.26-7.41 7.41-1.26-1.26 7.41-7.41zm1.17 10.35l-1.26-1.26L20.74 2H22v1.26l-8.87 8.87z"/>
            </svg>
        </div>
        
        <!-- Grid/Apps -->
        <div class="absolute top-5/7 right-5/7 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 16s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M4 8h4V4H4v4zm6 12h4v-4h-4v4zm-6 0h4v-4H4v4zm0-6h4v-4H4v4zm6 0h4v-4h-4v4zm6-10v4h4V4h-4zm-6 4h4V4h-4v4zm6 6h4v-4h-4v4zm0 6h4v-4h-4v4z"/>
            </svg>
        </div>
        <div class="absolute bottom-5/7 left-5/7 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 16.5s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M4 8h4V4H4v4zm6 12h4v-4h-4v4zm-6 0h4v-4H4v4zm0-6h4v-4H4v4zm6 0h4v-4h-4v4zm6-10v4h4V4h-4zm-6 4h4V4h-4v4zm6 6h4v-4h-4v4zm0 6h4v-4h-4v4z"/>
            </svg>
        </div>
        
        <!-- Search -->
        <div class="absolute top-6/7 left-6/7 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 17s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
            </svg>
        </div>
        <div class="absolute bottom-6/7 right-6/7 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 17.5s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
            </svg>
        </div>
        
        <!-- Filter -->
        <div class="absolute top-1/8 right-1/8 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 18s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"/>
            </svg>
        </div>
        <div class="absolute bottom-1/8 left-1/8 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 18.5s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"/>
            </svg>
        </div>
        
        <!-- More/Horizontal Dots -->
        <div class="absolute top-2/8 left-2/8 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 19s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/>
            </svg>
        </div>
        <div class="absolute bottom-2/8 right-2/8 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 19.5s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/>
            </svg>
        </div>
        
        <!-- Settings/Gear -->
        <div class="absolute top-3/8 right-3/8 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 20s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.07.62-.07.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/>
            </svg>
        </div>
        <div class="absolute bottom-3/8 left-3/8 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 20.5s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.07.62-.07.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/>
            </svg>
        </div>
        
        <!-- Lock -->
        <div class="absolute top-4/8 right-4/8 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 21s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/>
            </svg>
        </div>
        <div class="absolute bottom-4/8 left-4/8 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 21.5s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/>
            </svg>
        </div>
        
        <!-- Download -->
        <div class="absolute top-5/8 left-5/8 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 22s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
            </svg>
        </div>
        <div class="absolute bottom-5/8 right-5/8 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 22.5s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
            </svg>
        </div>
        
        <!-- Cloud -->
        <div class="absolute top-6/8 right-6/8 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 23s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96z"/>
            </svg>
        </div>
        <div class="absolute bottom-6/8 left-6/8 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 23.5s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96z"/>
            </svg>
        </div>
        
        <!-- Folder -->
        <div class="absolute top-7/8 left-7/8 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 24s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M10 4H4c-1.11 0-2 .89-2 2v12c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2h-8l-2-2z"/>
            </svg>
        </div>
        <div class="absolute bottom-7/8 right-7/8 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 24.5s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M10 4H4c-1.11 0-2 .89-2 2v12c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2h-8l-2-2z"/>
            </svg>
        </div>
        
        <!-- Link/Chain -->
        <div class="absolute top-1/9 right-1/9 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 25s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/>
            </svg>
        </div>
        <div class="absolute bottom-1/9 left-1/9 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 25.5s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/>
            </svg>
        </div>
        
        <!-- Refresh/Reload -->
        <div class="absolute top-2/9 left-2/9 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 26s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>
            </svg>
        </div>
        <div class="absolute bottom-2/9 right-2/9 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 26.5s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>
            </svg>
        </div>
        
        <!-- Bell/Notification -->
        <div class="absolute top-3/9 right-3/9 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 27s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/>
            </svg>
        </div>
        <div class="absolute bottom-3/9 left-3/9 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 27.5s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/>
            </svg>
        </div>
        
        <!-- Check/Circle Check -->
        <div class="absolute top-4/9 left-4/9 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 28s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
            </svg>
        </div>
        <div class="absolute bottom-4/9 right-4/9 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 28.5s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
            </svg>
        </div>
        
        <!-- Plus/Add -->
        <div class="absolute top-5/9 right-5/9 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 29s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
            </svg>
        </div>
        <div class="absolute bottom-5/9 left-5/9 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 29.5s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
            </svg>
        </div>
        
        <!-- Edit/Pencil -->
        <div class="absolute top-6/9 left-6/9 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 30s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
            </svg>
        </div>
        <div class="absolute bottom-6/9 right-6/9 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 30.5s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
            </svg>
        </div>
        
        <!-- Trash/Delete -->
        <div class="absolute top-7/9 right-7/9 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 31s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
            </svg>
        </div>
        <div class="absolute bottom-7/9 left-7/9 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 31.5s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
            </svg>
        </div>
        
        <!-- Eye/View -->
        <div class="absolute top-8/9 left-8/9 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 32s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
            </svg>
        </div>
        <div class="absolute bottom-8/9 right-8/9 w-6 h-6 md:w-10 md:h-10 text-black/10 dark:text-white/10 animate-float-icon" style="animation-delay: 32.5s;">
            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
            </svg>
        </div>
    </div>
    
    <div class="topic-content">
    <!-- Header - Tab bar plus foncée avec nom du topic -->
    <div class="glass-dark tab-bar sticky top-0 z-40 backdrop-blur-xl border-b border-white/10">
        <div class="max-w-2xl mx-auto px-4 py-4 flex items-center justify-between">
            <a href="{% url 'forum:topics_list' %}" class="text-white/80 hover:text-white transition-all hover:scale-105 flex items-center space-x-2">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                </svg>
                <span class="hidden sm:inline">Retour</span>
            </a>
            <!-- Nom du groupe dans la tab bar -->
            <div class="flex items-center space-x-2 flex-1 justify-center mx-4">
                {% if group.image %}
                    <img src="{{ group.image.url }}" alt="{{ group.name }}" class="w-6 h-6 rounded-lg object-cover">
                {% else %}
                    <svg class="w-5 h-5 text-white/80" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
                    </svg>
                {% endif %}
                <h1 class="text-white text-lg font-calligraphy truncate max-w-xs">{{ group.name }}</h1>
            </div>
            <div class="flex items-center space-x-3">
                <!-- Notifications Button -->
                <a href="{% url 'notifications:list' %}" class="relative group">
                    <div class="relative p-2 rounded-xl bg-white/10 hover:bg-white/20 border border-white/20 transition-all duration-300 hover:scale-110">
                        <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" />
                        </svg>
                        {% if unread_notifications_count > 0 %}
                        <span class="absolute -top-1 -right-1 w-5 h-5 rounded-full bg-gold flex items-center justify-center text-brand-primary text-xs font-bold shadow-gold animate-pulse">
                            {% if unread_notifications_count > 9 %}9+{% else %}{{ unread_notifications_count }}{% endif %}
                        </span>
                        {% endif %}
                    </div>
                </a>
                
                <!-- Profile Button -->
                <a href="{% url 'users:profile' user.username %}" class="p-1 rounded-xl hover:bg-white/10 transition-all duration-300 hover:scale-110">
                    <div class="w-8 h-8 rounded-xl bg-gradient-gold flex items-center justify-center overflow-hidden shadow-gold">
                        {% if user.avatar %}
                            <img src="{{ user.avatar.url }}" alt="{{ user.username }}" class="w-full h-full object-cover">
                        {% else %}
                            <span class="text-brand-primary text-xs font-bold">{{ user.username|first|upper }}</span>
                        {% endif %}
                    </div>
                </a>
            </div>
        </div>
    </div>
    
    <!-- Bannière du Groupe -->
    <div class="topic-banner border-b border-white/20 shadow-lg">
        <div class="max-w-2xl mx-auto px-4 py-6">
            <div class="flex items-center space-x-4">
                <div class="w-16 h-16 rounded-2xl bg-white/20 backdrop-blur-sm flex items-center justify-center shadow-lg overflow-hidden">
                    {% if group.image %}
                        <img src="{{ group.image.url }}" alt="{{ group.name }}" class="w-full h-full object-cover">
                    {% else %}
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2.5">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
                        </svg>
                    {% endif %}
                </div>
                <div class="flex-1">
                    <h1 class="text-white text-2xl md:text-3xl font-calligraphy mb-1">{{ group.name }}</h1>
                    {% if group.description %}
                        <p class="text-white/90 text-sm leading-relaxed">{{ group.description }}</p>
                    {% endif %}
                    <p class="text-white/70 text-xs mt-2">{{ page_obj.paginator.count }} discussion{{ page_obj.paginator.count|pluralize }}</p>
                </div>
                {% if group.creator == user %}
                <a href="{% url 'forum:manage_group' group.id %}" class="p-2 rounded-xl text-white/80 hover:text-white hover:bg-white/10 transition-all duration-300 hover:scale-110" title="Gérer le groupe">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                        <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                    </svg>
                </a>
                {% endif %}
            </div>
        </div>
    </div>
    
    <div class="max-w-2xl mx-auto px-4 py-6">
        <!-- Stories Carousel - Toujours affiché -->
        {% include 'stories/carousel.html' with users_with_stories=users_with_stories|default:"" %}
        
        <!-- Create Post Form -->
        <div class="glass-enhanced rounded-3xl p-5 mb-6 border border-white/20 shadow-2xl" x-data="{ showForm: false }">
            <div class="flex items-center space-x-3">
                <div class="w-12 h-12 rounded-2xl bg-gradient-gold flex items-center justify-center overflow-hidden shadow-gold">
                    {% if user.avatar %}
                        <img src="{{ user.avatar.url }}" alt="{{ user.username }}" class="w-full h-full object-cover">
                    {% else %}
                        <span class="text-brand-primary text-lg font-bold">{{ user.username|first|upper }}</span>
                    {% endif %}
                </div>
                <button 
                    @click="showForm = !showForm"
                    class="flex-1 text-left px-5 py-3 rounded-2xl bg-white/10 text-gray-300 hover:bg-white/20 transition-all duration-300 hover:scale-[1.02] backdrop-blur-sm border border-white/20"
                >
                    <span class="text-sm">Quoi de neuf dans {{ group.name }} ?</span>
                </button>
            </div>
            
            <div x-show="showForm" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 transform translate-y-2" x-transition:enter-end="opacity-100 transform translate-y-0" class="mt-5 space-y-4 pt-5 border-t border-white/20">
                <form method="POST" action="{% url 'forum:create_post' %}" enctype="multipart/form-data">
                    {% csrf_token %}
                    <input type="hidden" name="topic_id" value="{{ topic.id }}">
                    <input type="hidden" name="group_id" value="{{ group.id }}">
                    <textarea 
                        name="content" 
                        rows="4"
                        class="w-full px-5 py-4 rounded-2xl bg-white/10 border border-white/20 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent resize-none backdrop-blur-sm transition-all"
                        placeholder="Partagez vos pensées sur {{ group.name }}..."
                    ></textarea>
                    
                    <div class="flex items-center justify-between flex-wrap gap-2">
                        <div class="flex items-center gap-2 flex-wrap">
                            <label class="cursor-pointer btn-interactive">
                                <input type="file" name="image" accept="image/*" class="hidden" id="post-image-input">
                                <span class="px-4 py-2 rounded-full glass text-white/90 hover:text-white hover:bg-white/20 transition-all flex items-center space-x-2 text-sm font-medium">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                                    </svg>
                                    <span>Photo</span>
                                </span>
                            </label>
                            <label class="cursor-pointer btn-interactive">
                                <input type="file" name="video" accept="video/*" class="hidden" id="post-video-input">
                                <span class="px-4 py-2 rounded-full glass text-white/90 hover:text-white hover:bg-white/20 transition-all flex items-center space-x-2 text-sm font-medium">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" />
                                    </svg>
                                    <span>Vidéo</span>
                                </span>
                            </label>
                            <label class="cursor-pointer btn-interactive">
                                <input type="file" name="audio" accept="audio/*" class="hidden" id="post-audio-input">
                                <span class="px-4 py-2 rounded-full glass text-white/90 hover:text-white hover:bg-white/20 transition-all flex items-center space-x-2 text-sm font-medium">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3" />
                                    </svg>
                                    <span>Audio</span>
                                </span>
                            </label>
                        </div>
                        <button 
                            type="submit"
                            class="btn-pill bg-gradient-gold text-brand-primary text-sm font-semibold hover:shadow-gold hover:scale-105 transition-all btn-interactive font-bold"
                        >
                            Publier
                        </button>
                    </div>
                    <div id="post-media-preview" class="hidden mt-3 space-y-2">
                        <div id="post-image-preview" class="hidden">
                            <img id="post-preview-img" src="" alt="Preview" class="max-w-full h-48 object-cover rounded-2xl border border-white/20 shadow-lg">
                        </div>
                        <div id="post-video-preview" class="hidden">
                            <video id="post-preview-video" src="" controls class="max-w-full h-48 rounded-2xl border border-white/20 shadow-lg"></video>
                        </div>
                        <div id="post-audio-preview" class="hidden">
                            <audio id="post-preview-audio" src="" controls class="w-full rounded-2xl"></audio>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        
        <script>
            // Media preview for post creation
            document.getElementById('post-image-input')?.addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    // Reset other previews
                    document.getElementById('post-video-preview').classList.add('hidden');
                    document.getElementById('post-audio-preview').classList.add('hidden');
                    document.getElementById('post-video-input').value = '';
                    document.getElementById('post-audio-input').value = '';
                    
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        document.getElementById('post-preview-img').src = e.target.result;
                        document.getElementById('post-image-preview').classList.remove('hidden');
                        document.getElementById('post-media-preview').classList.remove('hidden');
                    };
                    reader.readAsDataURL(file);
                }
            });
            
            document.getElementById('post-video-input')?.addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    // Reset other previews
                    document.getElementById('post-image-preview').classList.add('hidden');
                    document.getElementById('post-audio-preview').classList.add('hidden');
                    document.getElementById('post-image-input').value = '';
                    document.getElementById('post-audio-input').value = '';
                    
                    const url = URL.createObjectURL(file);
                    document.getElementById('post-preview-video').src = url;
                    document.getElementById('post-video-preview').classList.remove('hidden');
                    document.getElementById('post-media-preview').classList.remove('hidden');
                }
            });
            
            document.getElementById('post-audio-input')?.addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    // Reset other previews
                    document.getElementById('post-image-preview').classList.add('hidden');
                    document.getElementById('post-video-preview').classList.add('hidden');
                    document.getElementById('post-image-input').value = '';
                    document.getElementById('post-video-input').value = '';
                    
                    const url = URL.createObjectURL(file);
                    document.getElementById('post-preview-audio').src = url;
                    document.getElementById('post-audio-preview').classList.remove('hidden');
                    document.getElementById('post-media-preview').classList.remove('hidden');
                }
            });
        </script>
        
        <!-- Posts Feed -->
        <div class="space-y-5 mt-5" id="posts-container">
            {% for post in page_obj %}
                <!-- CardView Moderne -->
                <div class="w-full bg-white/85 backdrop-blur-sm rounded-3xl shadow-xl p-4 hover:shadow-2xl transition-all duration-300 hover:scale-[1.01] stagger-item" data-post-id="{{ post.id }}">
                    <!-- Post Header -->
                    <div class="flex items-center space-x-3 mb-3">
                        <a href="{% url 'users:profile' post.author.username %}">
                            <div class="w-10 h-10 rounded-full overflow-hidden flex-shrink-0 shadow-md border-2 border-white/50">
                                {% if post.author.avatar %}
                                    <img src="{{ post.author.avatar.url }}" alt="{{ post.author.username }}" class="w-full h-full object-cover" loading="lazy">
                                {% else %}
                                    <div class="w-full h-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center">
                                        <span class="text-white text-sm font-bold">{{ post.author.username|first|upper }}</span>
                                    </div>
                                {% endif %}
                            </div>
                        </a>
                        <div class="flex flex-col leading-tight flex-1 min-w-0">
                            <a href="{% url 'users:profile' post.author.username %}" class="font-semibold text-gray-900 hover:text-blue-600 transition-colors truncate">
                                {{ post.author.username }}
                            </a>
                            <span class="text-xs text-gray-500 truncate">@{{ post.author.username|lower }}</span>
                        </div>
                        <span class="text-xs text-gray-400 flex-shrink-0">{{ post.created_at|timesince }}</span>
                    </div>
                    
                    <!-- Post Content -->
                    {% if post.content %}
                        <p class="mt-3 text-gray-700 whitespace-pre-wrap leading-relaxed">{{ post.content }}</p>
                    {% endif %}
                    
                    <!-- Post Media -->
                    {% if post.image %}
                        <img src="{{ post.image.url }}" alt="Post image" class="w-full rounded-2xl mt-3 cursor-pointer object-cover max-h-96" onclick="window.open(this.src, '_blank')" loading="lazy">
                    {% endif %}
                    {% if post.video %}
                        <video src="{{ post.video.url }}" controls class="w-full rounded-2xl mt-3 max-h-96 object-contain bg-gray-100" loading="lazy">
                            Votre navigateur ne supporte pas la lecture de vidéos.
                        </video>
                    {% endif %}
                    {% if post.audio %}
                        <div class="mt-3 rounded-2xl bg-gray-50 p-4 border border-gray-200">
                            <audio src="{{ post.audio.url }}" controls class="w-full">
                                Votre navigateur ne supporte pas la lecture audio.
                            </audio>
                        </div>
                    {% endif %}
                    
                    <!-- Post Actions Footer -->
                    <div class="flex items-center justify-between mt-4 pt-4 border-t border-gray-200 text-gray-600 text-sm">
                        <button 
                            onclick="toggleLike({{ post.id }})"
                            class="flex items-center space-x-1 hover:text-red-500 transition-all duration-300 hover:scale-110 btn-interactive px-2 py-1 rounded-lg hover:bg-red-50"
                            id="like-btn-{{ post.id }}"
                        >
                            <svg class="w-5 h-5 transform transition-transform duration-300" id="like-icon-{{ post.id }}" fill="{% if post.id in liked_posts %}currentColor{% else %}none{% endif %}" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
                            </svg>
                            <span class="font-medium" id="like-count-{{ post.id }}">{{ post.like_count }}</span>
                        </button>
                        
                        <button 
                            onclick="toggleComments({{ post.id }})"
                            class="flex items-center space-x-1 hover:text-green-500 transition-all duration-300 hover:scale-110 btn-interactive px-2 py-1 rounded-lg hover:bg-green-50"
                            id="comment-btn-{{ post.id }}"
                        >
                            <svg class="w-5 h-5 transform transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
                            </svg>
                            <span class="font-medium" id="comment-count-{{ post.id }}">{{ post.comment_count }}</span>
                        </button>
                        
                        <button 
                            class="flex items-center justify-center hover:text-blue-500 transition-all duration-300 hover:scale-110 btn-interactive px-2 py-1 rounded-lg hover:bg-blue-50"
                            onclick="sharePost({{ post.id }})"
                            title="Partager"
                        >
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z" />
                            </svg>
                        </button>
                    </div>
                    
                    <!-- Comments Section -->
                    <div id="comments-{{ post.id }}" class="hidden mt-5 space-y-4 pt-4 border-t border-gray-200">
                        <div id="comments-list-{{ post.id }}" class="space-y-3 max-h-60 overflow-y-auto pr-2">
                            {% for comment in post.comments.all %}
                                <div class="bg-gray-50 rounded-2xl p-3 comment-item border border-gray-200 hover:bg-gray-100 transition-colors">
                                    <div class="flex items-center space-x-2 mb-2">
                                        <div class="w-8 h-8 rounded-full overflow-hidden flex-shrink-0 shadow-sm border border-gray-300">
                                            {% if comment.author.avatar %}
                                                <img src="{{ comment.author.avatar.url }}" alt="{{ comment.author.username }}" class="w-full h-full object-cover" loading="lazy">
                                            {% else %}
                                                <div class="w-full h-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center">
                                                    <span class="text-white text-xs font-bold">{{ comment.author.username|first|upper }}</span>
                                                </div>
                                            {% endif %}
                                        </div>
                                        <span class="text-gray-900 font-semibold text-sm">{{ comment.author.username }}</span>
                                        <span class="text-gray-400 text-xs">·</span>
                                        <span class="text-gray-400 text-xs">{{ comment.created_at|timesince }}</span>
                                    </div>
                                    <p class="text-gray-700 text-sm leading-relaxed ml-10">{{ comment.content }}</p>
                                </div>
                            {% endfor %}
                        </div>
                        <form onsubmit="addComment(event, {{ post.id }})" class="flex space-x-3">
                            {% csrf_token %}
                            <input 
                                type="text" 
                                id="comment-input-{{ post.id }}"
                                name="content"
                                placeholder="Écrire un commentaire..."
                                class="flex-1 px-4 py-2.5 rounded-full bg-gray-50 border border-gray-200 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm transition-all"
                            >
                            <button 
                                type="submit"
                                class="px-4 py-2.5 bg-blue-500 text-white rounded-full text-sm font-semibold hover:bg-blue-600 hover:scale-105 transition-all btn-interactive shadow-sm"
                            >
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" />
                                </svg>
                            </button>
                        </form>
                    </div>
                </div>
            {% empty %}
                <div class="bg-white/85 backdrop-blur-sm rounded-3xl p-12 text-center border border-gray-200 shadow-xl fade-in-up">
                    <div class="flex justify-center mb-4">
                        <svg class="w-16 h-16 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09z" />
                        </svg>
                    </div>
                    <p class="text-gray-900 text-lg mb-2 font-semibold">Aucune discussion dans ce thème pour le moment</p>
                    <p class="text-gray-600 text-sm">Soyez le premier à publier !</p>
                </div>
            {% endfor %}
        </div>
        
        <!-- Skeleton Loader (masqué par défaut) -->
        <div id="skeleton-loader" class="hidden space-y-5 mt-5">
            {% for i in "123" %}
            <div class="skeleton-post">
                <div class="skeleton-header">
                    <div class="skeleton-avatar"></div>
                    <div class="skeleton-text-group">
                        <div class="skeleton-line skeleton-line-title"></div>
                        <div class="skeleton-line skeleton-line-subtitle"></div>
                    </div>
                </div>
                <div class="skeleton-content">
                    <div class="skeleton-line"></div>
                    <div class="skeleton-line skeleton-line-short"></div>
                </div>
                <div class="skeleton-actions">
                    <div class="skeleton-button"></div>
                    <div class="skeleton-button"></div>
                    <div class="skeleton-button"></div>
                </div>
            </div>
            {% endfor %}
        </div>
        
        <!-- Sentinel pour l'infinite scroll -->
        <div id="sentinel" class="h-10"></div>
        
        <!-- Message de fin de feed -->
        <div id="end-of-feed-message" class="hidden text-center py-8">
            <p class="text-white/60 text-sm">Vous avez atteint la fin du fil d'actualité</p>
        </div>
    </div>
    
    <!-- Floating Chat Button (FAB) - Vers la messagerie du groupe avec couleur du groupe -->
    <a href="{% url 'forum:group_detail' group.id %}" class="fixed bottom-6 right-6 z-50 group">
        <div class="relative">
            <div class="absolute inset-0 rounded-full blur-lg opacity-50 group-hover:opacity-75 transition-opacity duration-300 animate-pulse" style="background: {% if group.banner_color %}{{ group.banner_color }}{% else %}{{ topic.color }}{% endif %};"></div>
            <div class="relative w-14 h-14 rounded-full flex items-center justify-center shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-110 hover:rotate-12" style="background: {% if group.banner_color %}{{ group.banner_color }}{% else %}{{ topic.color }}{% endif %};">
                <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2.5">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 01-.825-.242m9.345-8.334a2.126 2.126 0 00-.476-.095 48.64 48.64 0 00-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0011.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155" />
                </svg>
            </div>
        </div>
    </a>
    </div>
</div>

<script>
    // Toggle Like function
    function toggleLike(postId) {
        fetch(`{% url 'forum:toggle_like' 0 %}`.replace('0', postId), {
            method: 'POST',
            headers: {
                'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value,
            },
        })
        .then(response => response.json())
        .then(data => {
            const likeBtn = document.getElementById(`like-btn-${postId}`);
            const likeIcon = document.getElementById(`like-icon-${postId}`);
            const likeCount = document.getElementById(`like-count-${postId}`);
            
            if (data.liked) {
                likeIcon.setAttribute('fill', 'currentColor');
                likeBtn.classList.add('text-red-500');
                likeBtn.classList.remove('text-gray-600');
            } else {
                likeIcon.setAttribute('fill', 'none');
                likeBtn.classList.remove('text-red-500');
                likeBtn.classList.add('text-gray-600');
            }
            likeCount.textContent = data.like_count;
        })
        .catch(error => console.error('Error:', error));
    }
    
    // Toggle Comments function
    function toggleComments(postId) {
        const commentsSection = document.getElementById(`comments-${postId}`);
        const commentBtn = document.getElementById(`comment-btn-${postId}`);
        
        if (commentsSection.classList.contains('hidden')) {
            commentsSection.classList.remove('hidden');
            commentBtn.classList.add('text-green-500');
            commentBtn.classList.remove('text-gray-600');
            
            // Charger les commentaires si nécessaire
            loadComments(postId);
        } else {
            commentsSection.classList.add('hidden');
            commentBtn.classList.remove('text-green-500');
            commentBtn.classList.add('text-gray-600');
        }
    }
    
    // Load Comments function
    function loadComments(postId) {
        // Les commentaires sont déjà dans le template, pas besoin de charger
    }
    
    // Add Comment function
    function addComment(event, postId) {
        event.preventDefault();
        const input = document.getElementById(`comment-input-${postId}`);
        const content = input.value.trim();
        
        if (!content) return;
        
        const formData = new FormData();
        formData.append('content', content);
        
        fetch(`{% url 'forum:add_comment' 0 %}`.replace('0', postId), {
            method: 'POST',
            headers: {
                'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value,
            },
            body: formData
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                const commentsList = document.getElementById(`comments-list-${postId}`);
                const commentHtml = `
                    <div class="bg-gray-50 rounded-2xl p-3 comment-item border border-gray-200 hover:bg-gray-100 transition-colors">
                        <div class="flex items-center space-x-2 mb-2">
                            <div class="w-8 h-8 rounded-full overflow-hidden flex-shrink-0 shadow-sm border border-gray-300">
                                <div class="w-full h-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center">
                                    <span class="text-white text-xs font-bold">${escapeHtml(data.comment.author).charAt(0).toUpperCase()}</span>
                                </div>
                            </div>
                            <span class="text-gray-900 font-semibold text-sm">${escapeHtml(data.comment.author)}</span>
                            <span class="text-gray-400 text-xs">·</span>
                            <span class="text-gray-400 text-xs">${data.comment.created_at}</span>
                        </div>
                        <p class="text-gray-700 text-sm leading-relaxed ml-10">${escapeHtml(data.comment.content)}</p>
                    </div>
                `;
                commentsList.insertAdjacentHTML('beforeend', commentHtml);
                document.getElementById(`comment-count-${postId}`).textContent = data.comment_count;
                input.value = '';
                // Scroll to the new comment
                commentsList.scrollTop = commentsList.scrollHeight;
            } else if (data.error) {
                alert(data.error);
            }
        })
        .catch(error => {
            console.error('Error:', error);
            alert('Erreur lors de l\'ajout du commentaire');
        });
    }
    
    function escapeHtml(text) {
        const div = document.createElement('div');
        div.textContent = text;
        return div.innerHTML;
    }
    
    // Share post function
    async function sharePost(postId) {
        const shareUrl = `${window.location.origin}{% url 'forum:post_detail' 0 %}`.replace('0', postId);
        const shareTitle = 'Voir ce post sur Kongossa';
        const shareText = 'Découvrez ce post intéressant sur Kongossa !';
        
        // Utiliser l'API Web Share si disponible (mobile)
        if (navigator.share) {
            try {
                await navigator.share({
                    title: shareTitle,
                    text: shareText,
                    url: shareUrl
                });
                return;
            } catch (err) {
                if (err.name !== 'AbortError') {
                    console.error('Erreur lors du partage:', err);
                }
            }
        }
        
        // Fallback : copier le lien dans le presse-papiers
        try {
            await navigator.clipboard.writeText(shareUrl);
            const notification = document.createElement('div');
            notification.className = 'fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 flex items-center space-x-2 animate-fade-in';
            notification.innerHTML = `
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
                </svg>
                <span>Lien copié dans le presse-papiers !</span>
            `;
            document.body.appendChild(notification);
            setTimeout(() => {
                notification.style.opacity = '0';
                notification.style.transition = 'opacity 0.3s';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        } catch (err) {
            console.error('Erreur lors de la copie:', err);
            alert(`Partagez ce lien :\n${shareUrl}`);
        }
    }
    
    // Infinite Scroll avec IntersectionObserver
    (function() {
        {% if page_obj %}
        let currentPage = {{ page_obj.number|default:1 }};
        let isLoading = false;
        let hasMore = {{ page_obj.has_next|yesno:"true,false" }};
        {% else %}
        let currentPage = 1;
        let isLoading = false;
        let hasMore = false;
        {% endif %}
        const postsContainer = document.getElementById('posts-container');
        const skeletonLoader = document.getElementById('skeleton-loader');
        const sentinel = document.getElementById('sentinel');
        const endOfFeedMessage = document.getElementById('end-of-feed-message');
        
        // Observer pour détecter quand le sentinel entre dans la vue
        if (sentinel && postsContainer && hasMore) {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting && !isLoading && hasMore) {
                        loadMorePosts();
                    }
                });
            }, {
                root: null,
                rootMargin: '200px',
                threshold: 0.1
            });
            
            observer.observe(sentinel);
            
            async function loadMorePosts() {
                if (isLoading || !hasMore) return;
                
                isLoading = true;
                currentPage++;
                
                // Afficher le skeleton loader
                if (skeletonLoader) {
                    skeletonLoader.classList.remove('hidden');
                }
                
                try {
                    const response = await fetch(`?page=${currentPage}&ajax=1`);
                    const html = await response.text();
                    
                    if (html.trim()) {
                        const tempDiv = document.createElement('div');
                        tempDiv.innerHTML = html;
                        
                        const newPosts = tempDiv.querySelectorAll('[data-post-id]');
                        newPosts.forEach((post, index) => {
                            post.classList.add('fade-in-post');
                            post.style.animationDelay = `${index * 0.1}s`;
                            postsContainer.appendChild(post);
                        });
                        
                        if (newPosts.length < 10) {
                            hasMore = false;
                            if (endOfFeedMessage) {
                                endOfFeedMessage.classList.remove('hidden');
                            }
                            observer.unobserve(sentinel);
                        }
                    } else {
                        hasMore = false;
                        if (endOfFeedMessage) {
                            endOfFeedMessage.classList.remove('hidden');
                        }
                        observer.unobserve(sentinel);
                    }
                } catch (error) {
                    console.error('Erreur lors du chargement des posts:', error);
                    hasMore = false;
                } finally {
                    isLoading = false;
                    if (skeletonLoader) {
                        skeletonLoader.classList.add('hidden');
                    }
                }
            }
        }
    })();
</script>
{% endblock %}
